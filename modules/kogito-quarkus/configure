#!/bin/sh

SCRIPT_DIR=$(dirname "${0}")
ADDED_DIR="${SCRIPT_DIR}"/added

# kogito-launch
cp -p "${ADDED_DIR}"/kogito-app-launch.sh "${KOGITO_HOME}"/
chmod +x-w "${KOGITO_HOME}"/kogito-app-launch.sh

cp -rv "${ADDED_DIR}"/launch/* "${KOGITO_HOME}"/launch/
cp -rv "${SCRIPT_DIR}"/s2i/bin/* /usr/local/s2i/

chmod 755 /usr/local/s2i/*
chown -R 1001:0 "${KOGITO_HOME}"
chmod -R ug+rwX "${KOGITO_HOME}"

rm -rf  "${KOGITO_HOME}"/launch/memory-limit.sh
rm -rf /usr/share/graalvm

unset JAVA_HOME
unset GRAALVM_HOME
