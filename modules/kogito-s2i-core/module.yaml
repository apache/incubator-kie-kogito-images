#
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#   http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing,
# software distributed under the License is distributed on an
# "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
# KIND, either express or implied.  See the License for the
# specific language governing permissions and limitations
# under the License.
#
schema_version: 1
name: org.kie.kogito.s2i.core
version: '999-SNAPSHOT'
description: Kogito s2i core module. All s2i files shoul be placed here.

labels:
  - name: "io.openshift.s2i.scripts-url"
    value: "image:///usr/local/s2i"
  - name: "io.openshift.s2i.destination"
    value: "/tmp"
  - name: "io.openshift.s2i.assemble-input-files"
    value: "/home/kogito/bin"

envs:
  - name: S2I_MODULE_LOCATION
    value: "/usr/local/s2i"
  - name: S2I_DESTINATION_DIR
    description: ^ Root directory for S2I mount, as specified by the **io.openshift.s2i.destination** label.  This should not be overridden by end users.
    example: /tmp

  - name: S2I_ARTIFACTS_DIR
    description: ^ Location mount for artifacts persisted with **save-artifacts** script, which are used with incremental builds.  This should not be overridden by end users.
    example: "${S2I_DESTINATION_DIR}/artifacts}"

  - name: S2I_SOURCE_DIR
    description: ^ Location of mount for source code to be built.  This should not be overridden by end users.
    example: "${S2I_DESTINATION_DIR}/src}"

  - name: PROJECT_GROUP_ID
    description: ^  Indicates the unique identifier of the organization or group that created the project.(default "com.company")
    example: "com.company"

  - name: PROJECT_ARTIFACT_ID
    description: ^  Indicates the unique base name of the primary artifact being generated.(default "project")
    example: "project"

  - name: PROJECT_VERSION
    description: ^  Indicates the version of the artifact generated by the project.(default "1.0-SNAPSHOT")
    example: "1.0-SNAPSHOT"

  - name: QUARKUS_PLUGIN
    description: ^ Defines the maven artifact for Quarkus Maven plugin, defaults to io.quarkus:quarkus-maven-plugin. If no version specified it will be detected automatically based on the current Kogito version.
    example: "io.quarkus:custom-plugin:custom.version"

  - name: QUARKUS_PLATFORM_GROUP_ID
    description: ^ Defines the Quarkus platform group id, defaults to io.quarkus.platform for community and com.redhat.quarkus.platform for product.
    example: "io.quarkus.custom"

  - name: QUARKUS_PLATFORM_ARTIFACT_ID
    description: ^ Defines the Quarkus platform artifact id, defaults to quarkus-bom for community and product.
    example: "quarkus-bom-custom"

  - name: QUARKUS_EXTRA_EXTENSIONS
    description: ^ Defines the Quarkus' extra extensions (as comma-separated list) to be added when performing build from assets.
    example: "org.kie:kie-addons-quarkus-knative-eventing,quarkus-kubernetes"

modules:
  install:
    - name: org.kie.kogito.persistence

run:
  cmd:
    - "/usr/local/s2i/run"

execute:
  - script: configure.sh

